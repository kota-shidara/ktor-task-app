# パフォーマンス最適化

## モデル選定戦略

**Haiku 4.5**（Sonnet の 90% の能力、コスト 1/3）:
- 頻繁に呼び出す軽量エージェント
- ペアプログラミングとコード生成
- マルチエージェントシステムのワーカーエージェント

**Sonnet 4.5**（最高のコーディングモデル）:
- メインの開発作業
- マルチエージェントワークフローのオーケストレーション
- 複雑なコーディングタスク

**Opus 4.5**（最も深い推論能力）:
- 複雑なアーキテクチャの意思決定
- 最高レベルの推論が求められるタスク
- 調査・分析タスク

## コンテキストウィンドウ管理

コンテキストウィンドウの残り 20% では以下を避ける:
- 大規模なリファクタリング
- 複数ファイルにまたがる機能実装
- 複雑なインタラクションのデバッグ

コンテキスト感度が低いタスク:
- 単一ファイルの編集
- 独立したユーティリティの作成
- ドキュメント更新
- 単純なバグ修正

## Ultrathink + Plan モード

深い推論が必要な複雑なタスクの場合:
1. `ultrathink` で拡張思考を使用する
2. **Plan モード** で構造化されたアプローチを有効にする
3. 複数回の批評ラウンドで「エンジンを温める」
4. 多角的な分析のために役割分担サブエージェントを使用する

## ビルドのトラブルシューティング

ビルドが失敗した場合:
1. **build-error-resolver** エージェントを使用する
2. エラーメッセージを分析する
3. 段階的に修正する
4. 各修正後に検証する
