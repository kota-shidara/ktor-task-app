# セキュリティガイドライン

## 必須セキュリティチェック

全てのコミット前に確認すること:
- [ ] ハードコードされたシークレットがない（APIキー、パスワード、トークン）
- [ ] 全てのユーザー入力がバリデーションされている
- [ ] SQLインジェクション対策済み（パラメータ化クエリ）
- [ ] XSS対策済み（HTMLのサニタイズ）
- [ ] CSRF対策が有効化されている
- [ ] 認証・認可が検証されている
<!-- - [ ] 全エンドポイントにレート制限が設定されている -->
- [ ] エラーメッセージが機密情報を漏洩しない

## シークレット管理

```typescript
// 絶対にしてはいけない: ハードコードされたシークレット
const apiKey = "sk-proj-xxxxx"

// 常にこうする: 環境変数を使用
const apiKey = process.env.OPENAI_API_KEY

if (!apiKey) {
  throw new Error('OPENAI_API_KEY not configured')
}
```

## セキュリティ対応プロトコル

セキュリティ問題が発見された場合:
1. 直ちに作業を停止する
2. **security-reviewer** エージェントを使用する
3. CRITICAL の問題を修正してから作業を継続する
4. 漏洩したシークレットをローテーションする
5. コードベース全体で同様の問題がないかレビューする
